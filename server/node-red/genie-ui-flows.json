[{"type":"tab","id":"d6376c6a.29c89","label":"Sheet 1"},{"type":"tab","id":"64e5ed4f.9b1a14","label":"Sheet 2"},{"id":"2d031b05.d2fce4","type":"websocket-listener","z":"d6376c6a.29c89","path":"/ws/time-service","wholemsg":"false"},{"id":"6e5a5f7f.91a5a","type":"websocket-listener","z":"64e5ed4f.9b1a14","path":"/ws/node-red-to-loopback-service-channel","wholemsg":"false"},{"id":"dcaabc8b.23554","type":"inject","z":"d6376c6a.29c89","name":"","topic":"","payload":"","payloadType":"date","repeat":"1","crontab":"","once":false,"x":297,"y":160,"wires":[["6831e2b9.97ce1c"]]},{"id":"6831e2b9.97ce1c","type":"function","z":"d6376c6a.29c89","name":"Format Wall Clock Time","func":"\nvar ticks = msg.payload;\nvar date = new Date(ticks);\nmsg.payload = {event: 'tick', data:{ ticks:ticks,\nhumanReadable: date.toString()}};\nreturn msg;","outputs":1,"noerr":0,"x":565,"y":159,"wires":[["67c3783c.983c88","a1c4506e.5e3bb"]]},{"id":"67c3783c.983c88","type":"websocket out","z":"d6376c6a.29c89","name":"","server":"2d031b05.d2fce4","client":"","x":886,"y":160,"wires":[]},{"id":"a1c4506e.5e3bb","type":"debug","z":"d6376c6a.29c89","name":"Debug","active":false,"console":"false","complete":"payload","x":889,"y":306,"wires":[]},{"id":"2f84bc59.d07b44","type":"websocket in","z":"64e5ed4f.9b1a14","name":"node-red-to-loopback-service-channel","server":"6e5a5f7f.91a5a","client":"","x":254,"y":182,"wires":[["eb77d31e.14883"]]},{"id":"c000c503.3fff38","type":"debug","z":"64e5ed4f.9b1a14","name":"Debug","active":true,"console":"false","complete":"payload","x":873,"y":181,"wires":[]},{"id":"eb77d31e.14883","type":"function","z":"64e5ed4f.9b1a14","name":"Load Global Config","func":"context.global.config = JSON.parse(msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":591,"y":182,"wires":[["c000c503.3fff38"]]},{"id":"ad5f4373.52a0c","type":"comment","z":"64e5ed4f.9b1a14","name":"Establish node-red to loopback comms","info":"This sheet sets up a named websocket to\ncommunicate with the hosting loopback\napplication.\n","x":177,"y":127,"wires":[]},{"id":"ac03d764.53fc28","type":"comment","z":"d6376c6a.29c89","name":"Example of communicating with browser via websocket","info":"","x":411,"y":45,"wires":[]},{"id":"d7c7177a.2838e8","type":"inject","z":"64e5ed4f.9b1a14","name":"Create Some Clustered Events","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"x":206,"y":399,"wires":[["1f6603df.e099fc"]]},{"id":"3bc0b9f9.c43f46","type":"http request","z":"64e5ed4f.9b1a14","name":"","method":"use","ret":"txt","url":"","x":754,"y":399,"wires":[["67dd645f.98229c"]]},{"id":"67dd645f.98229c","type":"debug","z":"64e5ed4f.9b1a14","name":"","active":true,"console":"false","complete":"false","x":1015,"y":399,"wires":[]},{"id":"1f6603df.e099fc","type":"function","z":"64e5ed4f.9b1a14","name":"Create Clustered Events","func":"if(context.global.config){\n    msg.method = 'GET';\n    msg.url = 'http://' + context.global.config.url + '/addSomeClusteredEvents';\n    return msg;\n}else{\n    return null;\n}\n","outputs":1,"noerr":0,"x":506,"y":399,"wires":[["3bc0b9f9.c43f46","7e673f16.8198c"]]},{"id":"7e673f16.8198c","type":"debug","z":"64e5ed4f.9b1a14","name":"","active":false,"console":"false","complete":"true","x":790,"y":521,"wires":[]},{"id":"7bd98fc2.84267","type":"inject","z":"64e5ed4f.9b1a14","name":"Cluster EventSource To Events","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"x":205,"y":672,"wires":[["4f2b0410.b0d4fc"]]},{"id":"aa0a96f2.55f568","type":"http request","z":"64e5ed4f.9b1a14","name":"","method":"use","ret":"txt","url":"","x":753,"y":672,"wires":[["ee5e5a5a.11a1a8"]]},{"id":"ee5e5a5a.11a1a8","type":"debug","z":"64e5ed4f.9b1a14","name":"","active":true,"console":"false","complete":"false","x":1014,"y":672,"wires":[]},{"id":"4f2b0410.b0d4fc","type":"function","z":"64e5ed4f.9b1a14","name":"Clustered Event","func":"if(context.global.config){\n    msg.method = 'POST';\n    msg.url = 'http://' + context.global.config.url + '/clusterEvents';\n    //msg.payload = JSON.stringify({\n    msg.payload = {\n        startDate: new Date(),\n        endDate: new Date()\n    };\n    return msg;\n}else{\n    return null;\n}\n","outputs":1,"noerr":0,"x":505,"y":672,"wires":[["aa0a96f2.55f568","80edd88.f7f1228"]]},{"id":"80edd88.f7f1228","type":"debug","z":"64e5ed4f.9b1a14","name":"","active":false,"console":"false","complete":"true","x":789,"y":794,"wires":[]}]